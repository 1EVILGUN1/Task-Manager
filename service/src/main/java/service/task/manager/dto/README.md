# README.md для папки `dto`

## Описание

Папка `dto` содержит классы объектов передачи данных (Data Transfer Objects, DTO) для приложения `service.task.manager`. DTO используются для обмена данными между клиентскими запросами и серверной логикой, обеспечивая строгую типизацию, валидацию и документирование. Все DTO аннотированы с использованием OpenAPI (Swagger) для автоматической генерации документации API. Папка разделена на три подпапки: `task`, `epic` и `subtask`, каждая из которых отвечает за соответствующие сущности.

## Структура папки

### 1. Папка `epic`
Содержит DTO для работы с эпиками — крупными задачами, которые могут включать подзадачи.

- **`EpicRequestCreatedDto.java`**  
  **Описание**: DTO для создания нового эпика.  
  **Поля**:
    - `name` (`String`, обязательное, не пустое) — Название эпика.
    - `description` (`String`, обязательное, не пустое) — Описание эпика.
    - `startTime` (`LocalDateTime`, обязательное) — Время начала эпика.
    - `duration` (`Duration`, обязательное) — Длительность эпика.  
      **Особенности**: Использует аннотацию `@Builder` для удобного создания объектов.

- **`EpicRequestUpdatedDto.java`**  
  **Описание**: DTO для обновления существующего эпика.  
  **Поля**:
    - `id` (`Long`, обязательное, положительное) — Идентификатор эпика.
    - `name` (`String`, обязательное, не пустое) — Обновленное название.
    - `description` (`String`, обязательное, не пустое) — Обновленное описание.
    - `status` (`Status`, обязательное) — Обновленный статус (`NEW`, `IN_PROGRESS`, `DONE`).
    - `duration` (`Duration`, обязательное) — Обновленная длительность.

- **`EpicResponseDto.java`**  
  **Описание**: DTO для возврата данных об эпике, включая связанные подзадачи.  
  **Поля**:
    - `id` (`Long`) — Идентификатор эпика.
    - `subtasks` (`List<SubtaskDto>`) — Список подзадач.
    - `name` (`String`) — Название эпика.
    - `description` (`String`) — Описание эпика.
    - `status` (`Status`) — Статус эпика.
    - `startTime` (`LocalDateTime`) — Время начала.
    - `duration` (`Duration`) — Длительность.
    - `endTime` (`LocalDateTime`) — Время окончания.
    - `type` (`TaskType`) — Тип задачи (всегда `EPIC`).  
      **Внутренний рекорд**:
    - `SubtaskDto` — Вложенный DTO для представления подзадач внутри эпика с полями `id`, `name`, `description`, `status`.

### 2. Папка `subtask`
Содержит DTO для работы с подзадачами, которые связаны с эпиками.

- **`SubtaskRequestCreatedDto.java`**  
  **Описание**: DTO для создания новой подзадачи.  
  **Поля**:
    - `epicId` (`Long`, обязательное) — Идентификатор эпика, к которому привязана подзадача.
    - `name` (`String`, обязательное, не пустое) — Название подзадачи.
    - `description` (`String`, обязательное, не пустое) — Описание подзадачи.
    - `startTime` (`LocalDateTime`, обязательное) — Время начала.
    - `duration` (`Duration`, обязательное) — Длительность.  
      **Особенности**: Использует аннотацию `@Builder`.

- **`SubtaskRequestUpdatedDto.java`**  
  **Описание**: DTO для обновления существующей подзадачи.  
  **Поля**:
    - `id` (`Long`, обязательное, положительное) — Идентификатор подзадачи.
    - `name` (`String`, обязательное, не пустое) — Обновленное название.
    - `description` (`String`, обязательное, не пустое) — Обновленное описание.
    - `status` (`Status`, обязательное) — Обновленный статус.
    - `duration` (`Duration`, обязательное) — Обновленная длительность.

- **`SubtaskResponseDto.java`**  
  **Описание**: DTO для возврата данных о подзадаче.  
  **Поля**:
    - `id` (`Long`) — Идентификатор подзадачи.
    - `epicId` (`Long`) — Идентификатор связанного эпика.
    - `name` (`String`) — Название подзадачи.
    - `description` (`String`) — Описание подзадачи.
    - `status` (`Status`) — Статус подзадачи.
    - `startTime` (`LocalDateTime`) — Время начала.
    - `endTime` (`LocalDateTime`) — Время окончания.
    - `duration` (`Duration`) — Длительность.
    - `type` (`TaskType`) — Тип задачи (всегда `SUBTASK`).

### 3. Папка `task`
Содержит DTO для работы с задачами — независимыми единицами работы.

- **`TaskRequestCreatedDto.java`**  
  **Описание**: DTO для создания новой задачи.  
  **Поля**:
    - `name` (`String`, обязательное, не пустое) — Название задачи.
    - `description` (`String`, обязательное, не пустое) — Описание задачи.
    - `startTime` (`LocalDateTime`, обязательное) — Время начала.
    - `duration` (`Duration`, обязательное) — Длительность.

- **`TaskRequestUpdatedDto.java`**  
  **Описание**: DTO для обновления существующей задачи.  
  **Поля**:
    - `id` (`Long`, обязательное, положительное) — Идентификатор задачи.
    - `name` (`String`, обязательное, не пустое) — Обновленное название.
    - `description` (`String`, обязательное, не пустое) — Обновленное описание.
    - `status` (`Status`, обязательное) — Обновленный статус.
    - `duration` (`Duration`, обязательное) — Обновленная длительность.

- **`TaskResponseDto.java`**  
  **Описание**: DTO для возврата данных о задаче.  
  **Поля**:
    - `id` (`Long`) — Идентификатор задачи.
    - `name` (`String`) — Название задачи.
    - `description` (`String`) — Описание задачи.
    - `status` (`Status`) — Статус задачи.
    - `startTime` (`LocalDateTime`) — Время начала.
    - `endTime` (`LocalDateTime`) — Время окончания.
    - `duration` (`Duration`) — Длительность.
    - `type` (`TaskType`) — Тип задачи (всегда `TASK`).

## Основные особенности

- **Документация**: Все DTO аннотированы с помощью `@Schema` для интеграции с Swagger. Поля содержат примеры и описания.
- **Валидация**: Используются аннотации Jakarta Validation (`@NotBlank`, `@NotNull`, `@Positive`) для проверки входных данных.
- **Типизация**: DTO реализованы как `record` для неизменяемости и компактности кода.
- **Перечисления**:
    - `Status` (`NEW`, `IN_PROGRESS`, `DONE`) — для указания статуса задач, эпиков и подзадач.
    - `TaskType` (`TASK`, `EPIC`, `SUBTASK`) — для идентификации типа сущности.
- **Временные данные**: Поля `startTime`, `endTime` и `duration` используют `LocalDateTime` и `Duration` для работы с временными интервалами.

## Использование

DTO используются в контроллерах (`controller`) для обработки запросов и ответов. Они обеспечивают:
- **Создание**: `RequestCreatedDto` для передачи данных при создании сущностей.
- **Обновление**: `RequestUpdatedDto` для изменения существующих сущностей.
- **Получение**: `ResponseDto` для возврата данных клиенту.

**Пример JSON для создания эпика**:
```json
{
  "name": "Проектный план",
  "description": "Планирование проекта",
  "startTime": "2025-04-27T10:00:00",
  "duration": "PT24H"
}
```

## Документация API

DTO документируются через Springdoc OpenAPI. Доступ к документации:
- **Swagger UI**: `http://localhost:8080/swagger-ui.html`
- **OpenAPI JSON**: `http://localhost:8080/v3/api-docs`

## Примечания

- DTO разделены по сущностям (`task`, `epic`, `subtask`) для лучшей организации кода.
- Поля в `ResponseDto` включают дополнительные данные (например, `endTime`, `type`), которые вычисляются на сервере.
- Для корректной работы требуется наличие перечислений `Status` и `TaskType` в пакете `service.task.manager.model.enums`.

## Дополнительно

Для информации о контроллерах или сервисах см. папки `controller` и `service`. Если возникают вопросы по настройке или расширению DTO, обратитесь к документации проекта или разработчикам.